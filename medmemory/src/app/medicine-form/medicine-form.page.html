<ion-header>
  <ion-toolbar>
    <ion-title>Agregar Medicamento</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="medicamentoForm" (ngSubmit)="onSubmit()">
    <!-- Nombre del Medicamento -->
    <ion-item>
      <ion-label position="stacked">Nombre del Medicamento</ion-label>
      <ion-input formControlName="nombre" required></ion-input>
    </ion-item>

    <!-- Frecuencia con Radio Buttons -->
    <ion-item>
      <ion-label position="stacked">Frecuencia</ion-label>
    </ion-item>

    <ion-radio-group formControlName="frecuencia" (ionChange)="onFrecuenciaChange($event)">
      <ion-item>
        <ion-radio justify="space-between" value="1">Una vez al día</ion-radio>
      </ion-item>

      <ion-item>
        <ion-radio justify="space-between" value="2">Dos veces al día</ion-radio>
      </ion-item>

      <ion-item>
        <ion-radio justify="space-between" value="3">Tres veces al día</ion-radio>
      </ion-item>

      <ion-item>
        <ion-radio justify="space-between" value="4">Cuatro veces al día</ion-radio>
      </ion-item>
    </ion-radio-group>

     <!-- Seleccionar horas usando ion-datetime -->
     <div *ngFor="let hora of horas; let i = index">
      <ion-item>
        <ion-label>Selecciona la hora {{ i + 1 }}</ion-label>
        <ion-datetime 
          formControlName="hora{{ i }}" 
          presentation="time" 
          display-format="HH:mm"
          minute-values="0,5,10,15.20,25,30,35,40,45,50,55" 
          hour-cycle="h23">
        </ion-datetime>
      </ion-item>
    </div>

    <ion-item>
      <ion-label position="stacked">Dosis</ion-label>
    
      <!-- Selección del tipo de dosis -->
      <ion-select justify="space-between" label="Tipo" placeholder="Tipo de Dosis" formControlName="tipoDosis" required>
        <ion-select-option value="tabletas">Tabletas</ion-select-option>
        <ion-select-option value="capsulas">Cápsulas</ion-select-option>
        <ion-select-option value="gotas">Gotas</ion-select-option>
        <ion-select-option value="mililitros">Mililitros (mL)</ion-select-option>
        <ion-select-option value="aplicaciones">Aplicaciones (cremas, ungüentos)</ion-select-option>
        <ion-select-option value="supositorios">Supositorios</ion-select-option>
      </ion-select>

      <div class="counter__section">
        <ion-button id="decrement" (click)="decrement()">-</ion-button>
        <p id="counter">{{ count }}</p>
        <ion-button id="increment" (click)="increment()">+</ion-button>
      </div>
    </ion-item>


    <!-- Botón de Guardar -->
    <ion-button expand="full" type="submit">Guardar Medicamento</ion-button>
  </form>

  <div *ngIf="medicamentos.length > 0">
    <ion-card *ngFor="let medicamento of medicamentos">
      <ion-card-header>
        <ion-card-title>{{ medicamento.nombre }}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>Veces al día: {{ medicamento.frecuencia }} - {{ medicamento.dosis }} {{ medicamento.tipoDosis }}</p>
        <p *ngFor="let hora of medicamento.horas; let i = index">
          Hora {{ i + 1 }}: {{ hora.toDate().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) }}
        </p>
      </ion-card-content>
    </ion-card>
  </div>
  

</ion-content>
